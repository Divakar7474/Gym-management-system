pipeline {
    agent any
    stages {
        stage('Clone Repository') {
            steps {
                // Clone the repository from GitHub
                git branch: 'main', url: 'https://github.com/Divakar7474/Gym-management-system.git'
            }
        }
        stage('Install Dependencies') {
            steps {
                // Install PHP and necessary extensions
                echo 'Installing PHP dependencies'
                bat '''
                choco install php -y
                php -r "if (!extension_loaded('mysqli')) exit(1);"
                '''
            }
        }
        stage('Run Tests') {
            steps {
                // Run unit tests (if applicable)
                echo 'Running Tests'
                bat 'php -l index.php' // Example: Syntax check on a PHP file
            }
        }
        stage('Deploy Application') {
            steps {
                echo 'Deploying Application'
                bat '''
                REM Deploy files to web server directory
                xcopy /E /I /Y .\\* "C:\\inetpub\\wwwroot\\GymManagementSystem\\"
                '''
            }
        }
    }
    post {
        success {
            echo 'Build and Deployment successful!'
        }
        failure {
            echo 'Build or Deployment failed. Check the logs.'
        }
    }
}
